#!@PYTHON@

if __name__ == '__main__':
    import top
    import subprocess as sp

    tests = [
            ('poly_ester',  'eq_poly_ester'),
            ('cesam',       'eq_cesam_all_lagrange_avg'),
            ('ester',       'eq_ESTER_all_lagrange')]

    for model_name, eq_file in tests:
        try:
            sp.check_call(['@prefix@/bin/top-build',
                '--model=%s' % model_name,
                '@abs_top_builddir@/examples/%s/%s' % (model_name, eq_file)])

            sp.check_call(['@PYTHON@',
                '@abs_top_builddir@/examples/%s/test.py' % model_name])

        except Exception as e:
            print('Something went wrong with `%s\' test' % eq_file)
            print('Error was:')
            print(e)

    print('OK')
